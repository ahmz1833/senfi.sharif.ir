# راهنمای کامل سیستم امضای کارزارها

## خلاصه عملکرد

سیستم امضای کارزارها شامل قابلیت‌های زیر است:

### ۱. ایجاد کارزار با گزینه ناشناس/عمومی
- کاربر هنگام ایجاد کارزار می‌تواند انتخاب کند که آیا لیست امضاکنندگان نمایش داده شود یا نه
- اگر "عمومی" انتخاب شود، لیست امضاکنندگان نمایش داده می‌شود
- اگر "ناشناس" انتخاب شود، فقط تعداد امضاها نمایش داده می‌شود

### ۲. امضا کردن کارزار
- کاربران لاگین‌شده می‌توانند کارزارها را امضا کنند
- دو نوع امضا: عمومی و ناشناس
- هر کاربر فقط یک بار می‌تواند هر کارزار را امضا کند

### ۳. نمایش امضاها
- تعداد کل امضاها همیشه نمایش داده می‌شود
- لیست امضاکنندگان فقط برای کارزارهای عمومی نمایش داده می‌شود
- امضاهای ناشناس در لیست به صورت "ناشناس" نمایش داده می‌شوند

### ۴. پروفایل کاربر
- نمایش لیست کارزارهای امضاشده توسط کاربر
- نمایش نوع امضا (عمومی/ناشناس) و تاریخ امضا

## فایل‌های ایجاد شده

### API Functions (`src/api/auth.js`)
- `signCampaign(campaignId, isAnonymous)` - امضا کردن کارزار
- `getCampaignSignatures(campaignId)` - دریافت لیست امضاهای کارزار
- `getUserSignedCampaigns()` - دریافت کارزارهای امضاشده توسط کاربر

### Components
- `src/components/CampaignSignatures.tsx` - نمایش امضاهای کارزار
- `src/components/SignCampaignButtons.tsx` - دکمه‌های امضا
- `src/pages/profile.tsx` - صفحه پروفایل کاربر

### Updated Files
- `src/pages/campaigns.tsx` - بهبود فرم ایجاد کارزار و نمایش کارزارها
- `src/theme/Layout/index.js` - اضافه کردن لینک پروفایل به منوی کاربر

## نحوه استفاده

### برای کاربران:
1. **ایجاد کارزار**: در صفحه کارزارها، فرم ایجاد کارزار را باز کنید
2. **انتخاب نوع کارزار**: عمومی یا ناشناس را انتخاب کنید
3. **امضا کردن**: در لیست کارزارها، روی دکمه‌های "امضا (عمومی)" یا "امضا (ناشناس)" کلیک کنید
4. **مشاهده پروفایل**: از منوی کاربر، روی "پروفایل" کلیک کنید

### برای توسعه‌دهندگان:
1. **اضافه کردن کامپوننت امضا**:
   ```tsx
   import SignCampaignButtons from '@site/src/components/SignCampaignButtons';
   import CampaignSignatures from '@site/src/components/CampaignSignatures';
   
   <SignCampaignButtons campaignId={campaignId} />
   <CampaignSignatures campaignId={campaignId} />
   ```

2. **استفاده از API functions**:
   ```tsx
   import { signCampaign, getCampaignSignatures, getUserSignedCampaigns } from '@site/src/api/auth';
   ```

## نکات مهم

- هر کاربر فقط یک بار می‌تواند هر کارزار را امضا کند
- کارزارهای ناشناس هیچ‌وقت لیست امضاکنندگان را نمایش نمی‌دهند
- امضاهای ناشناس در لیست به صورت "ناشناس" نمایش داده می‌شوند
- تمام عملیات نیاز به احراز هویت دارند (به جز مشاهده امضاهای کارزارهای عمومی)

## تست

برای تست سیستم:
1. یک کارزار جدید ایجاد کنید
2. با کاربران مختلف وارد شوید و کارزار را امضا کنید
3. پروفایل کاربران را بررسی کنید
4. لیست امضاها را در صفحه کارزارها مشاهده کنید 